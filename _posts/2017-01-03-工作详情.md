---
layout: post
title: 2016年工作详情
date: 2017-01-03
---

我大概是2016年4月25号到公司上班的，到现在有八个多月了，不禁感慨时光飞逝！

刚过来的时候有点惴惴不安，担心自己无法胜任工作。另一方面又踌躇满志，相信自己身体素质不错，学习能力也是中上等的，应该既能学到有用的技能，又能为公司创造价值。

我最开始学的是Visual Basic 6.0，在学校时我们对过时的技术一般是不闻不问的，总是努力追求最新的技术使用最新的软件，很多东西学了也无法实践，以至于眼高手低，很难做出对社会有价值的产品来。我之前对VB有一点了解，再加上自己有编程基础，计算机用的也比较熟，很快就大概掌握VB程序设计方法了，也做了几个小的试验项目。

同时老板又让我研究西门子S7-200 Smart与计算机网络通信问题，我在大学时研究过C语言版本的服务器客户端程序，对网络通信也有所了解，但是我对PLC了解比较少，从官方网站下载了些手册看了看，又安装了两个相关软件，发现PLC与上位机网络通信用的协议不是TCP/IP协议，而是什么S7协议。参见链接[SIMATIC S7-200 SMART到底支不支持TCP/IP协议？](http://www.ad.siemens.com.cn/service/answer/solution.aspx?Q_ID=114158&cid=1076)

>最佳答案：S7-200 SMART 的以太网通讯不是标准的 TCP协议（RFC 793），而是西门子的S7 协议在以太网上的应用。西门子的S7协议（以太网）是在 ISO ON TCP (RFC 1006 )的基础上在ISO 模型的第7层增加了 S7协议集。所有S7-200 SMART 不支持标准 TCP 通讯。S7-1200，S7-300 CPU 都支持 S7 通讯和 OPEN IE 通讯（包括标准 TCP ,UDP ,ISO ON TCP三个协议）

由于对PLC没有相关经验，也没找到合适的教程，上位机用VB开发的话也要借助PC ACCESS与PLC通信，不符合老板的要求，所以很久没有进展。

接下来老板又拿来一块STM32F207的开发板，让我研究其与计算机网络通信的问题。在嵌入式方面，我以前只接触过基于avr的arduino开发板，也了解基于arm的Raspberry Pi B+单板电脑，但是了解都不够深入，也没做过什么系统化的嵌入式项目，但我感觉搞定开发板网络通信应该不是什么难题。我先是下载设置好开发环境，最开始应该是用串口转USB工具往单片机下载程序的，好像下载速度特别慢，也不可以在线仿真，于是我从淘宝买了个J-Link下载仿真器，由于是山寨的，出问题，刷固件，写个程序费很大的劲才上传到开发板上。程序是传上去了，但是把网线插上没反应，网线并没有问题，程序应该也没问题，于是怀疑开发板出问题了。这样就很尴尬了，之后用老板拿过来的enc28j60网络模块连到开发板上，可以通信，但是丢包率太高了，关于这一点也得到网友的证实。

我又开始在网上搜索，寻找一个功能强大的开发板，售后服务好，资料多的，最后看上了正点原子的STM32F407，核心芯片是arm的Cortex-M4，例程比较丰富，让老板看了看，然后买了下来，收货后非常的兴奋，第一次用这么精致的开发板，把最复杂的程序下载到板子上，运行效果很不错。

在大学时就曾想深入学习嵌入式，但是感觉做有趣的项目大概要花不少钱，想要花钱少只能在开发板上玩个LED，蜂鸣器，数码管，小马达，没什么意思。于是没怎么深入的学，当时看过一点嵌入式的视频，说的好像是入门先学51单片机，然后进阶学AVR，最后学习arm开发，并且arm要与linux结合起来，感觉特别高大上。图书馆里的书虽然很多，但是很难找到一本像样的好书，大部分书要么枯燥乏味，废话连篇，要么就是老旧的教材，想要自学点东西也不知道从何学起，于是买的那些电子元器件吃灰好几年，偶尔想起来玩一玩，但是常常因为缺少元器件而没法进行下去。

由于比较喜欢在linux下写C程序，于是我的PC端程序就在linux下运行了，通过把按键信息发送给开发板来控制开发板上的LED亮灭。老板当时强调的一个概念是要达到每秒钟通信100次以上，这样就需要把led灯的状态每隔10ms发送给PC端一次，程序的结构需要调整，并且需要精确的延时，还要清晰的表达通信状况，我感觉压力山大。arm程序难处表现在，代码量挺大，结构挺复杂，稍微调整下结构都感觉特别麻烦。还有上位机我在考虑是否要使用图形化界面更直观的表现通信情况，如果使用图形化界面的话用哪一种编程语言呢？VB，C#还是其他？我顿时感觉有点力不从心了。

之后老板给了我一个紧急的VB项目，在原来项目的基础上修改，调整，借助于功能强大的notepad++以及程序中的注释可以很方便的理解修改代码，但是由于VB 6是1998年的产物，2008年微软已经停止提供技术支持，虽然网上有不少的讨论，但是有时候遇到问题很难解决，使用各种关键字检索各种搜索引擎得到的有效答案也很有限，有那么一点绝望和无助，但是沉浸到代码中去还好把问题解决了。

在校园时我就听说了程序员的各种职业病，眼睛、颈椎、后背、腰部、腿部、胳膊、甚至手腕都容易出问题。我短短工作了一两个月，都不怎么加班也常常感觉身心疲惫，看一天显示器后眼睛再也不想看液晶屏了，也没什么精力看书，后背、腰部也隐隐作痛，手腕都因为长时间使用鼠标的缘故特别难受。我开始健身，偶尔也跑到外面锻炼，但是效果并不明显。接下来的一段时间不断的到车间帮忙干活儿，偶尔也出去安装机器，了解了一些工具的使用方法，也长了不少见识。

由于我一连十多年都是上学过来的，虽然大学锻炼身体不少，也跑过马拉松，但是爬上爬下的活儿我还是没怎么干过的，尤其是有些公司没有脚手架，用叉车把我们挑上去，站在高处还要用力挪动机箱，又没啥保护措施，感觉挺危险的！我不怎么排斥体力劳动，但是太危险的，对身体有伤害的活儿我还是不太愿意做，我不时的在打退堂鼓，是不是应该换个工作呢？同学们的高薪工作也不时的在诱惑我，但是当我看到老板一家人跟大伙儿一起到车间干活儿时，我在想多一点人生经历也没啥坏处。

那一阵子工作上好像没什么紧急的任务，因为不时会被车间或出去装机器的任务打断，我只是在查看C#，VB方面的电子书，以及嵌入式开发手册，学习开发板配带的程序，也帮老板翻译过一个图纸。

由于工作用的电脑配置稍差，如果用chrome浏览器翻墙时总会出现卡死的情况，用起来特别不爽，如果用linux系统操作，虽然比较流畅，但是毕竟公司的一些事情还是要在windows下做的。于是在十一假期结束后，从网上买了个高配的笔记本，重新配置好工作环境，安装虚拟机，继续学习。学习的重点还是STM32F407开发板，期间老板让我对比两个VB程序的差异，我用反编译工具还原源代码，用Beyond Compare比较两个项目代码的异同，找到了一些差异，但是这样的代码好像不可以直接重新编译，即使参考着代码重写程序也要花不少时间呢，相当的纠结。

我在电子方面的基础是比较差的，工作上感觉远远不够用，毕竟以前动手实践也比较少，研究开发板不做具体的项目是不行的，我开始寻思做一些什么项目，刚开始不过是通过驱动板控制电机，步进电机和舵机，因为arduino的开源社区用户比较多，网上程序比较丰富，刚开始实验都在arduino上做的，后来又在Raspberry Pi上。我寻思着要学习画PCB电路板，但是这得从简单的电路开始，从最基础开始，也要学习焊接电子元器件和贴片元器件，于是又从网上采购了一批零件，慢慢学起。从51单片机开始做起，毕竟51单片机试验成本最低了！

2016年中国的经济形势并不很好，不仅实体经济变差了，曾经炙手可热的移动互联网行业也变差了，人民币也在贬值，此外环境也越来越糟，人人都在为雾霾担忧。马云前一阵子说：坏消息是经济形势不太好，好消息是所有人的形势都不太好。2017注定所有人都必须更加小心谨慎的做出选择。

我常常对未来充满了忧虑，但是我又能做出什么改变呢？我必须更加努力的学技术，做项目，积累经验，努力为公司创造更大的价值。
